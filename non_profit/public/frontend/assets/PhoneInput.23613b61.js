var m=(s,e,i)=>new Promise((t,n)=>{var o=a=>{try{l(i.next(a))}catch(c){n(c)}},r=a=>{try{l(i.throw(a))}catch(c){n(c)}},l=a=>a.done?t(a.value):Promise.resolve(a.value).then(o,r);l((i=i.apply(s,e)).next())});import{N as V,u as k,o as b,g as R,E as _}from"./index.92312bcf.js";const D=s=>s.querySelector("input,textarea")||s,L={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"};class O{constructor(){this.now=null,this.past=[],this.future=[]}undo(){const e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){const e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}const i=this.now.value!==e.value,t=this.now.selection.some((n,o)=>n!==e.selection[o]);!i&&!t||(i&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,i){this.now=e,this.updateElementState(e,{inputType:i,data:null})}}function H(s,...e){return e.every(({value:i})=>i===s.value)}function P(s,...e){return e.every(({value:i,selection:t})=>i===s.value&&t[0]===s.selection[0]&&t[1]===s.selection[1])}function B({value:s,selection:e},i,t){const[n,o]=e,r=typeof t=="function"?t({value:s,selection:e}):t;return{value:s,selection:r==="replace"?[n,n+i.length]:[n,o]}}function S(s){return typeof s=="string"}function x(s,e,i,t){let n="";for(let o=e.length;o<s.length;o++){const r=s[o],l=(t==null?void 0:t.value[o])===r;if(!S(r)||r===i&&!l)return n;n+=r}return n}function M(s,e){return Array.isArray(e)?s.length===e.length&&Array.from(s).every((i,t)=>{const n=e[t];return S(n)?i===n:i.match(n)}):e.test(s)}function j(s,e,i){let t=null,n=null;const o=Array.from(s.value).reduce((l,a,c)=>{const u=x(e,l,a,i),h=l+u,d=e[h.length];return S(d)?h+d:a.match(d)?(t===null&&c>=s.selection[0]&&(t=h.length),n===null&&c>=s.selection[1]&&(n=h.length),h+a):h},""),r=x(e,o,"",i);return{value:M(o+r,e)?o+r:o,selection:[t!=null?t:o.length,n!=null?n:o.length]}}function N({value:s,selection:e},i){const[t,n]=e;let o=t,r=n;return{value:Array.from(s).reduce((a,c,u)=>{const h=a+c;return t===u&&(o=a.length),n===u&&(r=a.length),h.match(i)?h:a},""),selection:[o,r]}}function y(s,e,i=null){if(M(s.value,e))return s;const{value:t,selection:n}=Array.isArray(e)?j(s,e,i):N(s,e);return{selection:n,value:Array.isArray(e)?t.slice(0,e.length):t}}function A(s,e){if(!Array.isArray(e))return s;const[i,t]=s.selection,n=[],o=Array.from(s.value).reduce((r,l,a)=>{const c=e[a];return a===i&&n.push(r.length),a===t&&n.push(r.length),S(c)&&c===l?r:r+l},"");return n.length<2&&n.push(...new Array(2-n.length).fill(o.length)),{value:o,selection:[n[0],n[1]]}}class T{constructor(e,i){this.initialElementState=e,this.maskOptions=i,this.value="",this.selection=[0,0];const{value:t,selection:n}=y(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=t,this.selection=n}addCharacters([e,i],t){const{value:n}=this,o=this.getMaskExpression({value:n.slice(0,e)+t+n.slice(i),selection:[e+t.length,e+t.length]}),r={value:n,selection:[e,i]},l=A(r,o),[a,c]=B(l,t,this.maskOptions.overwriteMode).selection,u=l.value.slice(0,a)+t,h=u.length,d=y({value:u+l.value.slice(c),selection:[h,h]},o,r);if(n.slice(0,a)===y({value:u,selection:[h,h]},o,r).value||P(this,d))throw new Error("Invalid mask value");this.value=d.value,this.selection=d.selection}deleteCharacters([e,i]){if(e===i||!i)return;const{value:t}=this,n=this.getMaskExpression({value:t.slice(0,e)+t.slice(i),selection:[e,e]}),o={value:t,selection:[e,i]},r=A(o,n),[l,a]=r.selection,c=r.value.slice(0,l)+r.value.slice(a),u=y({value:c,selection:[l,l]},n,o);this.value=u.value,this.selection=u.selection}getMaskExpression(e){const{mask:i}=this.maskOptions;return typeof i=="function"?i(e):i}}class U{constructor(e){this.element=e,this.listeners=[]}listen(e,i,t){const n=i;this.element.addEventListener(e,n,t),this.listeners.push(()=>this.element.removeEventListener(e,n))}destroy(){this.listeners.forEach(e=>e())}}const p={CTRL:1<<0,ALT:1<<1,SHIFT:1<<2,META:1<<3},f={Y:89,Z:90};function g(s,e,i){return s.ctrlKey===!!(e&p.CTRL)&&s.altKey===!!(e&p.ALT)&&s.shiftKey===!!(e&p.SHIFT)&&s.metaKey===!!(e&p.META)&&s.keyCode===i}function K(s){return g(s,p.CTRL,f.Y)||g(s,p.CTRL|p.SHIFT,f.Z)||g(s,p.META|p.SHIFT,f.Z)}function W(s){return g(s,p.CTRL,f.Z)||g(s,p.META,f.Z)}function G({value:s,selection:e},i){const[t,n]=e;if(t!==n)return[t,n];const o=i?s.slice(t).indexOf(`
`)+1||s.length:s.slice(0,n).lastIndexOf(`
`)+1;return[i?t:o,i?o:n]}function Z({value:s,selection:e},i){const[t,n]=e;return t!==n?[t,n]:(i?[t,n+1]:[t-1,n]).map(r=>Math.min(Math.max(r,0),s.length))}const q=/\s+$/g,Y=/^\s+/g,I=/\s/;function $({value:s,selection:e},i){const[t,n]=e;if(t!==n)return[t,n];if(i){const a=s.slice(t),[c]=a.match(Y)||[""],u=a.trimStart().search(I);return[t,u!==-1?t+c.length+u:s.length]}const o=s.slice(0,n),[r]=o.match(q)||[""],l=o.trimEnd().split("").reverse().findIndex(a=>a.match(I));return[l!==-1?n-r.length-l:0,n]}function v(s=[]){return(e,...i)=>s.reduce((t,n)=>Object.assign(Object.assign({},t),n(t,...i)),e)}function X(s,e){const i=Object.assign(Object.assign({},L),e),t=v(i.preprocessors),n=v(i.postprocessors),o=typeof s=="string"?{value:s,selection:[0,0]}:s,{elementState:r}=t({elementState:o,data:""},"validation"),l=new T(r,i),{value:a,selection:c}=n(l,o);return typeof s=="string"?a:{value:a,selection:c}}class z extends O{constructor(e,i){super(),this.element=e,this.maskitoOptions=i,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new U(this.element),this.options=Object.assign(Object.assign({},L),this.maskitoOptions),this.preprocessor=v(this.options.preprocessors),this.postprocessor=v(this.options.postprocessors),this.teardowns=this.options.plugins.map(t=>t(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",t=>{if(K(t))return t.preventDefault(),this.redo();if(W(t))return t.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",t=>{const n=t.inputType.includes("Forward");switch(this.updateHistory(this.elementState),t.inputType){case"historyUndo":return t.preventDefault(),this.undo();case"historyRedo":return t.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:t,isForward:n,selection:Z(this.elementState,n)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:t,isForward:n,selection:$(this.elementState,n),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:t,isForward:n,selection:G(this.elementState,n),force:!0});case"insertCompositionText":return;case"insertLineBreak":return this.handleEnter(t);case"insertFromPaste":case"insertText":case"insertFromDrop":default:return this.handleInsert(t,t.data||"")}}),this.eventListener.listen("input",({inputType:t})=>{t!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){const{value:e,selectionStart:i,selectionEnd:t}=this.element;return{value:e,selection:[i||0,t||0]}}get maxLength(){const{maxLength:e}=this.element;return e===-1?1/0:e}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e==null?void 0:e())}updateElementState({value:e,selection:i},t={inputType:"insertText",data:null}){const n=this.elementState.value;this.updateValue(e),this.updateSelectionRange(i),n!==e&&this.dispatchInputEvent(t)}updateSelectionRange([e,i]){var t;const{element:n}=this;n.matches(":focus")&&(n.selectionStart!==e||n.selectionEnd!==i)&&((t=n.setSelectionRange)===null||t===void 0||t.call(n,e,i))}updateValue(e){this.element.value=e}ensureValueFitsMask(){this.updateElementState(X(this.elementState,this.options))}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:i,isForward:t,force:n=!1}){const o={value:this.elementState.value,selection:i},[r,l]=o.selection,{elementState:a}=this.preprocessor({elementState:o,data:""},t?"deleteForward":"deleteBackward"),c=new T(a,this.options),[u,h]=a.selection;c.deleteCharacters([u,h]);const d=this.postprocessor(c,o);if(!(o.value.slice(0,r)+o.value.slice(l)===d.value&&!n)){if(e.preventDefault(),H(o,a,c,d))return this.updateSelectionRange(t?[h,h]:[u,u]);this.updateElementState(d,{inputType:e.inputType,data:null}),this.updateHistory(d)}}handleInsert(e,i){const t=this.elementState,{elementState:n,data:o=i}=this.preprocessor({data:i,elementState:t},"insert"),r=new T(n,this.options);try{r.addCharacters(n.selection,o)}catch(h){return e.preventDefault()}const[l,a]=n.selection,c=t.value.slice(0,l)+i+t.value.slice(a),u=this.postprocessor(r,t);if(u.value.length>this.maxLength)return e.preventDefault();c!==u.value&&(e.preventDefault(),this.updateElementState(u,{data:i,inputType:e.inputType}),this.updateHistory(u))}handleEnter(e){this.isTextArea&&this.handleInsert(e,`
`)}}const E=new Map,w=new Map;function C(s,e){return m(this,null,function*(){var i,t;const n=(i=e==null?void 0:e.elementPredicate)!==null&&i!==void 0?i:D;w.set(s,n);const o=yield n(s);w.get(s)===n&&((t=E.get(s))===null||t===void 0||t.destroy(),e&&E.set(s,new z(o,e)))})}const J={unmounted:s=>{var e;(e=E.get(s))===null||e===void 0||e.destroy(),E.delete(s),w.delete(s)},mounted:(i,t)=>m(void 0,[i,t],function*(s,{value:e}){return C(s,e)}),updated:(t,n)=>m(void 0,[t,n],function*(s,{value:e,oldValue:i}){e!==i&&(yield C(s,e))})},te={__name:"PhoneInput",props:{modelValue:String},emits:["update:modelValue"],setup(s,{emit:e}){const i={mask:["+","6","2","-",/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/],elementPredicate:o=>new Promise(r=>{requestAnimationFrame(()=>m(this,null,function*(){const l=yield o.getInputElement();r(l)}))})},t=e,n=o=>{t("update:modelValue",o)};return(o,r)=>V((b(),R(k(_),{value:s.modelValue,onIonChange:r[0]||(r[0]=l=>n(l.target.value)),label:"No. Telp.",placeholder:"+62-xxx xxxx xxxx",labelPlacement:"floating"},null,8,["value"])),[[k(J),i]])}};export{te as _};
