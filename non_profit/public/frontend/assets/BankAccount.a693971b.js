import{r as m,z as I,A as h,$ as y,o as s,g as k,w as t,e as l,b as _,u as o,B as S,C as b,F,X as C,W as P,G as w,f,t as N,E as v,P as p,q as x,k as D,l as O,c as R}from"./index.92312bcf.js";import{H as E}from"./Header.2bdb63fd.js";import{g as L,a as U,e as j}from"./BankList.975947ff.js";import{d as H}from"./Document.b6d59247.js";const T={key:0,class:"w-full h-48 bg-gray-300 animate-pulse"},q={key:1},X={__name:"BankAccount",props:{mode:String,id:String},setup(g){const u=g,e=m({bank:void 0,account_name:void 0,bank_account_no:void 0}),r=m({bank:void 0,account_name:void 0,bank_account_no:void 0}),d=m(!0),i=I(),B=h(()=>u.mode==="edit"?e.value.bank&&e.value.account_name&&e.value.bank_account_no&&(e.value.bank!==r.value.bank||e.value.account_name!==r.value.account_name||e.value.bank_account_no!==r.value.bank_account_no):e.value.bank&&e.value.account_name&&e.value.bank_account_no),V=()=>{u.mode==="edit"?j(e.value).then(a=>{console.log("Bank account edited:",a),i.push({name:"BankAccount"})}).catch(a=>{console.error("Failed to edit bank account:",a)}):(console.log(e.value),R({method:"POST",url:"non_profit.api.fundraising.new_bank_account",params:{bank_name:e.value.bank,account_name:e.value.account_name,account_number:e.value.bank_account_no},onSuccess:n=>{console.log(n),i.push({name:"BankAccount"})},onError:n=>{console.log(n)}}).reload())},A=()=>{H("Bank Account",u.id).then(a=>{console.log("Bank account deleted:",a),i.push({name:"BankAccount"})}).catch(a=>{console.error("Failed to delete bank account:",a)})};return y(()=>{if(u.mode==="edit"){d.value=!0;const a=L(u.id);a.reload().then(n=>{Object.assign(e.value,a.data),Object.assign(r.value,a.data),console.log(a),d.value=!1}).catch(n=>{console.error("Failed to load bank details:",n),d.value=!1})}else d.value=!1;console.log(u.id," ",u.mode)}),(a,n)=>(s(),k(o(O),null,{default:t(()=>[l(E,{showBackButton:!0}),l(o(D),{class:"ion-padding"},{default:t(()=>[d.value&&u.mode==="edit"?(s(),_("div",T)):(s(),_("div",q,[l(o(S),null,{default:t(()=>[l(o(b),null,{default:t(()=>[l(o(F),{modelValue:e.value.bank,"onUpdate:modelValue":n[0]||(n[0]=c=>e.value.bank=c),label:"Nama Bank"},{default:t(()=>[(s(!0),_(C,null,P(o(U),c=>(s(),k(o(w),{key:c.id,value:c.id},{default:t(()=>[f(N(c.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(o(b),null,{default:t(()=>[l(o(v),{modelValue:e.value.account_name,"onUpdate:modelValue":n[1]||(n[1]=c=>e.value.account_name=c),label:"Pemilik Rekening",labelPlacement:"floating"},null,8,["modelValue"])]),_:1}),l(o(b),null,{default:t(()=>[l(o(v),{modelValue:e.value.bank_account_no,"onUpdate:modelValue":n[2]||(n[2]=c=>e.value.bank_account_no=c),label:"Nomor Rekening",labelPlacement:"floating",type:"number"},null,8,["modelValue"])]),_:1}),l(o(p),{onClick:V,disabled:!B.value},{default:t(()=>[f("Submit")]),_:1},8,["disabled"]),u.mode==="edit"?(s(),k(o(p),{key:0,color:"danger",onClick:A},{default:t(()=>[f("Delete")]),_:1})):x("",!0)]),_:1})]))]),_:1})]),_:1}))}};export{X as default};
