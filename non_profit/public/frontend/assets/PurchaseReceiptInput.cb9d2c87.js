import{z as S,r as k,$ as q,A as H,o as u,g as p,w as t,e as a,d as c,b as i,W as v,u as e,C as b,F as U,X as y,G as F,f as r,t as N,E as g,P as d,q as V,a7 as R,k as M,l as T}from"./index.92312bcf.js";import{H as $}from"./Header.2bdb63fd.js";import{F as j}from"./Footer.bdb453cc.js";import{b as z}from"./PurchaseReceipt.9368233c.js";import{b as A,c as D}from"./Item.a2386fb3.js";const E={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},L={class:"bg-white p-6 rounded shadow-lg text-center"},O=c("h2",{class:"text-2xl mb-4"},"Sukses!",-1),G=c("p",{class:"mb-4"},"Berhasil menambah riwayat pembelian",-1),Z={__name:"PurchaseReceiptInput",setup(K){const f=S(),n=k([{item_code:"",qty:null,rate:null}]),m=k(!1);q(()=>{A()});const x=()=>{n.value.push({item_code:"",qty:null,rate:null})},I=o=>{n.value.length>1&&n.value.splice(o,1)},B=()=>{z(n.value).then(()=>{m.value=!0}).catch(o=>{console.error("Failed to add purchase receipt:",o)})},P=()=>{m.value=!1},C=()=>{P(),f.push({name:"PurchaseHistory"})},w=H(()=>n.value.some(o=>!o.item_code||o.qty===null||o.rate===null));return(o,_)=>(u(),p(e(T),null,{default:t(()=>[a($,{showBackButton:!0}),a(e(M),{class:"p-4 relative"},{default:t(()=>[c("form",{onSubmit:R(B,["prevent"]),class:"space-y-4"},[(u(!0),i(y,null,v(n.value,(s,h)=>(u(),i("div",{key:h,class:"item-form space-y-2 mb-4"},[a(e(b),null,{default:t(()=>[a(e(U),{modelValue:s.item_code,"onUpdate:modelValue":l=>s.item_code=l,label:"Nama Barang",labelPlacement:"floating"},{default:t(()=>[(u(!0),i(y,null,v(e(D),l=>(u(),p(e(F),{value:l.name},{default:t(()=>[r(N(l.name),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(e(b),null,{default:t(()=>[a(e(g),{type:"number",modelValue:s.qty,"onUpdate:modelValue":l=>s.qty=l,label:"Kuantitas",labelPlacement:"floating"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(e(b),null,{default:t(()=>[a(e(g),{type:"number",modelValue:s.rate,"onUpdate:modelValue":l=>s.rate=l,label:"harga satuan",labelPlacement:"floating"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n.value.length>1?(u(),p(e(d),{key:0,onClick:l=>I(h),expand:"block",color:"danger"},{default:t(()=>[r("Hapus Barang")]),_:2},1032,["onClick"])):V("",!0)]))),128)),a(e(d),{onClick:x,expand:"block"},{default:t(()=>[r("Tambah Barang")]),_:1}),a(e(d),{type:"submit",expand:"block",disabled:w.value},{default:t(()=>[r("Simpan & Ajukan")]),_:1},8,["disabled"])],32),m.value?(u(),i("div",E,[c("div",L,[O,G,a(e(d),{onClick:C,expand:"block"},{default:t(()=>[r("kembali")]),_:1})])])):V("",!0)]),_:1}),c("div",null,[a(e(d),{onClick:_[0]||(_[0]=s=>e(f).push({name:"PurchaseHistory"})),expand:"block"},{default:t(()=>[r("Riwayat Pembelian")]),_:1})]),a(j)]),_:1}))}};export{Z as default};
